<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Meditation Journey Â· Complete</title>
    <link rel="stylesheet" href="/styles.css" />
    <style>
      .finish-flow {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 60px;
        text-align: center;
        width: 100%;
      }

      .finish-phase-1,
      .finish-phase-2 {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 60px;
      }

      .finish-phase-2.is-hidden {
        display: none;
      }

      .finish-return-copy {
        margin: 0;
        max-width: 820px;
        font-family: "Cormorant", serif;
        font-size: 40px;
        line-height: 48px;
        font-weight: 600;
        color: #ffffff;
      }

      .finish-figure {
        width: min(260px, calc(100vw - 48px));
        height: auto;
        display: block;
      }

      .finish-buttons {
        width: min(420px, 100%);
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .finish-action {
        width: 100%;
        min-height: 88px;
        height: auto;
        padding: 20px 24px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        border: none;
        text-decoration: none;
        border-radius: 20px;
        background: #1b265a;
        color: #ffffff;
        font-family: "Cormorant", serif;
        font-size: 40px;
        line-height: 48px;
        font-weight: 600;
        transition: background 0.2s ease;
      }

      .finish-action:hover {
        background: #23306f;
      }

      .finish-action-coffee {
        background: rgba(27, 38, 90, 0.85);
      }

      .finish-action-icon {
        width: auto;
        height: 32px;
        display: block;
        flex: 0 0 auto;
      }

      .finish-fade-out {
        animation: introFadeUpOut var(--motion-fade-out-duration) var(--motion-ease) forwards;
      }

      @media (max-width: 700px) {
        .finish-buttons {
          width: min(100%, 360px);
        }

        .finish-action {
          min-height: 76px;
          font-size: 34px;
          line-height: 42px;
          padding: 16px 18px;
        }

        .finish-action-icon {
          height: 32px;
        }
      }
    </style>
  </head>
  <body class="theme-dark">
    <main class="screen screen-finish">
      <div class="screen-content">
        <div class="finish-flow" aria-live="polite">
          <section class="finish-phase-1" data-finish-phase-1>
            <p class="intro-copy">
              <span class="intro-line intro-line-1" data-finish-intro-line-1
                >Your journey is complete.</span
              >
              <span class="intro-line intro-line-2" data-finish-intro-line-2
                >How are you feeling?</span
              >
            </p>
          </section>

          <section class="finish-phase-2 is-hidden" data-finish-phase-2>
            <p class="finish-return-copy" data-finish-return-text>
              The door will be here when you return.
            </p>

            <img
              class="finish-figure"
              src=""
              alt="A flower"
              data-finish-flower
            />

            <div class="finish-buttons" data-finish-buttons>
              <a class="finish-action" href="/">Go to the door</a>
              <a
                class="finish-action finish-action-coffee"
                href="https://buymeacoffee.com/nadiavalko"
                target="_blank"
                rel="noopener noreferrer"
              >
                <img
                  class="finish-action-icon"
                  src="/assets/coffee cup.svg"
                  alt=""
                  aria-hidden="true"
                />
                <span>Buy me a coffee</span>
              </a>
            </div>
          </section>
        </div>
      </div>
    </main>

    <script>
      (() => {
        const phase1 = document.querySelector("[data-finish-phase-1]");
        const line1 = document.querySelector("[data-finish-intro-line-1]");
        const line2 = document.querySelector("[data-finish-intro-line-2]");
        const phase2 = document.querySelector("[data-finish-phase-2]");
        const flower = document.querySelector("[data-finish-flower]");
        const returnText = document.querySelector("[data-finish-return-text]");
        const buttons = document.querySelector("[data-finish-buttons]");

        if (!phase1 || !line1 || !line2 || !phase2 || !flower || !returnText || !buttons) {
          return;
        }

        const flowers = [
          "/assets/flower 1.png",
          "/assets/flower 2.png",
          "/assets/flower 3.png",
        ];
        const randomFlower = flowers[Math.floor(Math.random() * flowers.length)];
        flower.src = randomFlower;

        const fadeOutDelayFromStart = 4600;
        const fadeOutDuration = 1200;
        const phase2Start = fadeOutDelayFromStart + fadeOutDuration;

        window.setTimeout(() => {
          line1.classList.add("finish-fade-out");
          line2.classList.add("finish-fade-out");
        }, fadeOutDelayFromStart);

        window.setTimeout(() => {
          phase1.style.display = "none";
          phase2.classList.remove("is-hidden");

          returnText.classList.add("burn-seq", "burn-seq-1");
          flower.classList.add("burn-seq", "burn-seq-2");
          buttons.classList.add("burn-seq", "burn-seq-3");
        }, phase2Start);
      })();
    </script>
  </body>
</html>
